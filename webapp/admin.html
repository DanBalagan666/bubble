<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin — Bubble Coffee</title>
  <style>
    body{font-family:Inter,Arial;background:#111;color:#fff;padding:20px}
    .wrap{max-width:900px;margin:0 auto}
    h1{color:#ff66ff}
    table{width:100%;border-collapse:collapse}
    td,th{padding:8px;border-bottom:1px solid rgba(255,255,255,0.06);vertical-align:top}
    .small{font-size:13px;color:#bbb}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Заказы (admin)</h1>
    <div class="small">Чтобы получить данные: <code>/admin/orders?key=&lt;ADMIN_CHAT_ID&gt;</code></div>
    <div id="out"></div>
  </div>
  <script>
    async function load(){
      const key = prompt('Введите admin ключ (ADMIN_CHAT_ID):') || '';
      if(!key) return;
      const r = await fetch('/admin/orders?key=' + encodeURIComponent(key));
      const js = await r.json();
      if(!js.ok){ document.getElementById('out').innerText = JSON.stringify(js); return; }
      const out = document.getElementById('out');
      const rows = js.orders;
      if(rows.length===0){ out.innerHTML = '<div class="small">Нет заказов</div>'; return; }
      let html = '<table><tr><th>id</th><th>when</th><th>items</th><th>total</th></tr>';
      rows.forEach(o=>{
        html += `<tr><td>${o.id}</td><td class="small">${o.created_at}</td><td>${o.items.map(i=>i.title+' ×'+i.qty).join('<br>')}</td><td>${o.total} ₽</td></tr>`;
      });
      html += '</table>';
      out.innerHTML = html;
    }
    load();
  </script>
</body>
</html>
